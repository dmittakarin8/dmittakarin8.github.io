---
published: true
layout: post
title: "Exploiting the MS08-067 vulnerability without Metasploit"
---









I'm currently enrolled in Offensive Security's Penetration Testing with Kali Linux course with the intention of obtaining the OSCP Certification.  During the OSCP Certification Exam the use of Metasploit is limited, therefore I am not using it when exploiting the servers in the OSCP lab environment.  
Here are the steps I took to perform my first exploit - MS08-067 - without the use of Metasploit.

## <i class="icon-pencil"></i> I targeted the Netbios service by using Nmap's smb-check-vulns script on a Windows 2000 Server

	nmap -v -p 139, 445 --script=smb-check-vulns --script-args=unsafe=1 192.168.31.205

## <i class="icon-upload">Nmap returned the following

![_config.yml]({{ site.baseurl }}/images/nmap-ms08067-vulnerable.png)

## <i class="icon-pencil"></i>Search exploit-db for an exploit and found the following

![_config.yml]({{ site.baseurl }}/images/ms08067-exploitdb.png)

## <i class="icon-pencil"></i>The exploit code states that impacket and pycrypto are required.  Download impacket and pycrypto.

	cd /opt/
    wget https://pypi.python.org/packages/source/i/impacket/impacket-0.9.13.tar.gz
    wget https://pypi.python.org/packages/source/p/pycrypto/pycrypto-2.6.1.tar.gz
    tar -xzf impacket-0.9.13.tar.gz
    tar -xzf pycrypto-2.6.1.tar.gz
 
Need python dev tools installed in order to build pycrypto

	apt-get install python-dev
    
Change the permissions on the impacket folder and run setup

    cd impacket-0.9.13/
	./setup.py

Change the permissions on the pycrypto folder and run setup
	cd ..
    cd pycrypto-2.6.1/ 
	python setup.py build
    python setup.py install
    
Change the port # in the exploit code to the port # reported as vulnerable by Nmap earlier


